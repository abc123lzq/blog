(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{194:function(a,t,s){"use strict";s.r(t);var e=s(0),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"yapi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#yapi"}},[a._v("#")]),a._v(" YApi")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/YMFE/yapi",target:"_blank",rel:"noopener noreferrer"}},[a._v("YApi"),s("OutboundLink")],1),a._v("旨在为开发、产品、测试人员提供更优雅的接口管理服务。可以帮助开发者轻松创建、发布、维护 API")]),a._v(" "),s("h2",{attrs:{id:"环境要求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境要求"}},[a._v("#")]),a._v(" 环境要求")]),a._v(" "),s("p",[a._v("nodejs（7.6+)")]),a._v(" "),s("p",[a._v("mongodb（2.6+）")]),a._v(" "),s("p",[a._v("下载慢的可以下载我的百度云分享")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://pan.baidu.com/s/1fI-_yY9uDOHvXEloKFZ4DQ",target:"_blank",rel:"noopener noreferrer"}},[a._v("mongodb-win32-x86_64-2008plus-ssl-4.0.11-signed"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("strong",[a._v("提取码：hiwg")])]),a._v(" "),s("p",[s("router-link",{attrs:{to:"/docs/mongodb/#安装流程图"}},[a._v("mongodb安装教程")])],1),a._v(" "),s("h2",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),s("p",[a._v("可视化部署")]),a._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[a._v("npm install -g yapi-cli --registry https://registry.npm.taobao.org\nyapi server\n")])])]),s("p",[a._v("在浏览器打开 http://0.0.0.0:9090 访问。非本地服务器，请将 0.0.0.0 替换成指定的域名或ip")]),a._v(" "),s("p",[a._v("127.0.0.1:9090 就可进入图形部署界面")]),a._v(" "),s("img",{attrs:{src:a.$withBase("/yapi/yapi-1.png?v=1"),width:"800",alt:"img"}}),a._v(" "),s("img",{attrs:{src:a.$withBase("/yapi/yapi-2.png?v=1"),width:"800",alt:"img"}}),a._v(" "),s("p",[a._v('初始化管理员账号成功,账号名："admin@admin.com"，密码："ymfe.org"')]),a._v(" "),s("p",[a._v('部署成功，请切换到部署目录，输入： "node vendors/server/app.js" 指令启动服务器, 然后在浏览器打开 http://127.0.0.1:3000 访问')]),a._v(" "),s("h2",{attrs:{id:"服务器管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务器管理"}},[a._v("#")]),a._v(" 服务器管理")]),a._v(" "),s("p",[a._v("推荐使用 pm2 管理 node 服务器启动，停止，具体使用方法可参考下面的教程：\n"),s("a",{attrs:{href:"https://imweb.io/topic/57c8cbb27f226f687b365636",target:"_blank",rel:"noopener noreferrer"}},[a._v("pm2使用教程"),s("OutboundLink")],1)]),a._v(" "),s("h3",{attrs:{id:"设置开机启动服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置开机启动服务"}},[a._v("#")]),a._v(" 设置开机启动服务")]),a._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[a._v("npm install pm2 -g\npm2 start xxx.js \npm2 save\npm2 unstartup\n")])])]),s("h3",{attrs:{id:"windows用户需要安装兼容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#windows用户需要安装兼容"}},[a._v("#")]),a._v(" windows用户需要安装兼容")]),a._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[a._v("npm install pm2-windows-startup -g\npm2-startup install\npm2 start xxx.js \npm2 save\n")])])]),s("h2",{attrs:{id:"pm2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pm2"}},[a._v("#")]),a._v(" pm2 "),s("badge",{attrs:{text:"推荐"}})],1),a._v(" "),s("h3",{attrs:{id:"安装-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-2"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[a._v("npm install pm2 -g\n")])])]),s("h3",{attrs:{id:"启动项目-多种方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动项目-多种方法"}},[a._v("#")]),a._v(" 启动项目(多种方法)")]),a._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!--启动某个js 运行--\x3e")]),a._v("\npm2 start xxx.js \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!--给项目一个别名,注意是两个- --\x3e")]),a._v("\npm2 start xxx.js --name aliasName\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!--多cpu ，cluster模式--\x3e")]),a._v("\npm2 start xxx.js -i max  //按照最大cpu数量\npm2 start xxx.js -i 3 //3个\n")])])]),s("h3",{attrs:{id:"关闭应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关闭应用"}},[a._v("#")]),a._v(" 关闭应用")]),a._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[a._v("pm2 delete xxx\n")])])]),s("h3",{attrs:{id:"重启应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重启应用"}},[a._v("#")]),a._v(" 重启应用")]),a._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[a._v("pm2 reload xxx\n")])])]),s("h3",{attrs:{id:"查看日志-多种方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看日志-多种方法"}},[a._v("#")]),a._v(" 查看日志(多种方法)")]),a._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!--200行日志查看--\x3e")]),a._v("\npm2 logs xxx --lines 200\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!--查看错误--\x3e")]),a._v("\npm2 logs xxx --err\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!--清空日志--\x3e")]),a._v("\npm2 flush xxx\n")])])]),s("h3",{attrs:{id:"查看运行情况"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看运行情况"}},[a._v("#")]),a._v(" 查看运行情况")]),a._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[a._v("pm2 monit xxx\n")])])]),s("h3",{attrs:{id:"开机重启"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开机重启"}},[a._v("#")]),a._v(" 开机重启")]),a._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[a._v("pm2 save\npm2 startup\n")])])]),s("h3",{attrs:{id:"移除启动脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#移除启动脚本"}},[a._v("#")]),a._v(" 移除启动脚本")]),a._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[a._v("pm2 unstartup\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),s("p",[s("pit"),a._v(" pm2 unstartup生成自启动脚本指令不适用win 系统，所以需要安装 pm2-windows-startup")],1)]),a._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[a._v("npm install pm2-windows-startup -g\npm2-startup install\n")])])]),s("p",[a._v("这样windows只需要pm2 save 就可以了")]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),s("p",[a._v("配置完进程守护后，可以重启电脑看效果。\nYApi系统使用也很简单看下官方使用说明就可以")])]),a._v(" "),s("h2",{attrs:{id:"按需配置-一般不用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#按需配置-一般不用"}},[a._v("#")]),a._v(" 按需配置(一般不用)")]),a._v(" "),s("h3",{attrs:{id:"升级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#升级"}},[a._v("#")]),a._v(" 升级")]),a._v(" "),s("p",[a._v("升级项目版本是非常容易的，并且不会影响已有的项目数据，只会同步 vendors 目录下的源码文件。")]),a._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[a._v("cd  {项目目录}\nyapi ls //查看版本号列表\nyapi update //升级到最新版本\nyapi update -v v1.1.0 //升级到指定版本\n")])])]),s("h3",{attrs:{id:"配置邮箱"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置邮箱"}},[a._v("#")]),a._v(" 配置邮箱")]),a._v(" "),s("p",[a._v("打开项目目录 config.json 文件，新增 mail 配置， 替换默认的邮箱配置")]),a._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[a._v('{\n  "port": "*****",\n  "adminAccount": "********",\n  "db": {...},\n  "mail": {\n    "enable": true,\n    "host": "smtp.163.com",    //邮箱服务器\n    "port": 465,               //端口\n    "from": "***@163.com",     //发送人邮箱\n    "auth": {\n        "user": "***@163.com", //邮箱服务器账号\n        "pass": "*****"        //邮箱服务器密码\n    }\n  }\n}\n')])])]),s("h3",{attrs:{id:"禁止注册"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#禁止注册"}},[a._v("#")]),a._v(" 禁止注册")]),a._v(" "),s("p",[a._v("在 config.json 添加 closeRegister:true 配置项,就可以禁止用户注册 yapi 平台，修改完成后，请重启 yapi 服务器。")]),a._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[a._v('{\n  "port": "*****",\n  "closeRegister":true\n}\n')])])]),s("Utterances")],1)}),[],!1,null,null,null);t.default=r.exports}}]);