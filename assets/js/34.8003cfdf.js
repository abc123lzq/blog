(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{191:function(v,_,t){"use strict";t.r(_);var s=t(0),a=Object(s.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h2",{attrs:{id:"udp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#udp"}},[v._v("#")]),v._v(" UDP")]),v._v(" "),t("h3",{attrs:{id:"面向报文"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#面向报文"}},[v._v("#")]),v._v(" 面向报文")]),v._v(" "),t("ol",[t("li",[t("p",[v._v("在发送端，"),t("code",[v._v("应用层")]),v._v("将数据传递给，"),t("code",[v._v("传输层")]),v._v("的 UDP 协议。 UDP 只会给数据增加一个 UDP 头标识下是 UDP 协议，然后就传递给"),t("code",[v._v("网络层")]),v._v("了。")])]),v._v(" "),t("li",[t("p",[v._v("在接收端，"),t("code",[v._v("网络层")]),v._v("将数据传递给"),t("code",[v._v("传输层")]),v._v("，UDP 只去除 IP 报文头就传递给"),t("code",[v._v("应用层")]),v._v("，不会任何拼接操作")])])]),v._v(" "),t("h3",{attrs:{id:"缺点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#缺点"}},[v._v("#")]),v._v(" 缺点")]),v._v(" "),t("ol",[t("li",[t("p",[v._v("UDP 是"),t("code",[v._v("无连接")]),v._v("的，也就是说通信不需要建立和断开连接。")])]),v._v(" "),t("li",[t("p",[v._v("UDP 也是"),t("code",[v._v("不可靠")]),v._v("的。协议收到什么数据就传递什么数据，并且也不会备份数据，对方能不能收到是不关心的")])]),v._v(" "),t("li",[t("p",[v._v("UDP "),t("code",[v._v("没有拥塞控制")]),v._v("，一直会以恒定的速度发送数据。即使网络条件不好，也不会对发送速率进行调整。这样实现的弊端就是在网络条件不好的情况下可能会导致丢包，但是优点也很明显，在某些实时性要求高的场景（比如电话会议）就需要使用 UDP 而不是 TCP。")])])]),v._v(" "),t("h3",{attrs:{id:"高效"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#高效"}},[v._v("#")]),v._v(" 高效")]),v._v(" "),t("p",[v._v("因为 UDP 没有 TCP 那么复杂，需要保证数据不丢失且有序到达。所以 UDP 的头部"),t("code",[v._v("开销小")]),v._v("，只有八字节，相比 TCP 的至少二十字节要少得多，在传输数据报文时是很高效的。")]),v._v(" "),t("h3",{attrs:{id:"传输方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#传输方式"}},[v._v("#")]),v._v(" 传输方式")]),v._v(" "),t("p",[v._v("UDP 不止支持一对一的传输方式，可以支持一对多，"),t("code",[v._v("多对多")]),v._v("，多对一的方式，也就是说 UDP 提供了单播，多播，广播的功能。")]),v._v(" "),t("h2",{attrs:{id:"tcp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tcp"}},[v._v("#")]),v._v(" TCP")]),v._v(" "),t("h3",{attrs:{id:"头部"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#头部"}},[v._v("#")]),v._v(" 头部")]),v._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[v._v("TIP")]),v._v(" "),t("p",[v._v("TCP 头部比 UDP 头部复杂的多，以下几个字段是很重要的")])]),v._v(" "),t("ol",[t("li",[t("p",[v._v("Sequence number，这个序号保证了 TCP 传输的报文都是"),t("code",[v._v("有序的序号")]),v._v("，对端可以通过序号顺序的拼接报文")])]),v._v(" "),t("li",[t("p",[v._v("Acknowledgement Number，这个序号表示数据接收端"),t("code",[v._v("期望接收")]),v._v("的下一个字节的编号是多少，同时也表示上一个序号的数据已经收到")])]),v._v(" "),t("li",[t("p",[v._v("Window Size，窗口大小，表示"),t("code",[v._v("还能接收多少字节")]),v._v("的数据，用于流量控制")])]),v._v(" "),t("li",[t("p",[v._v("标识符")]),v._v(" "),t("ol",[t("li",[t("p",[v._v("URG=1：该字段为1,表示本数据报的数据部分包含紧急信息，是一个"),t("code",[v._v("高优先级数据报文")]),v._v("，此时紧急指针有效。紧急数据一定位于当前数据包数据部分的最前面，紧急指针标明了紧急数据的尾部。")])]),v._v(" "),t("li",[t("p",[v._v("ACK=1：该字段为1,表示"),t("code",[v._v("确认号字段有效")]),v._v("。此外，TCP 还规定在连接建立后传送的所有报文段都必须把 ACK 置为一。")])]),v._v(" "),t("li",[t("p",[v._v("PSH=1：该字段为1,表示"),t("code",[v._v("接收端应该立即将数据 push 给应用层")]),v._v("，而不是等到缓冲区满后再提交。")])]),v._v(" "),t("li",[t("p",[v._v("RST=1：该字段为1,表示当前 TCP 连接出现严重问题，可能"),t("code",[v._v("需要重新建立 TCP 连接")]),v._v("，也可以用于拒绝非法的报文段和拒绝连接请求。")])]),v._v(" "),t("li",[t("p",[v._v("SYN=1：当SYN=1，ACK=0时，表示当前报文段是一个"),t("code",[v._v("连接请求报文")]),v._v("。当SYN=1，ACK=1时，表示当前报文段是一个"),t("code",[v._v("同意建立连接的应答报文")]),v._v("。")])]),v._v(" "),t("li",[t("p",[v._v("FIN=1：该字段为一表示此报文段是一个"),t("code",[v._v("释放连接的请求报文")]),v._v("。")])])])])]),v._v(" "),t("h3",{attrs:{id:"建立tcp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#建立tcp"}},[v._v("#")]),v._v(" 建立TCP")]),v._v(" "),t("blockquote",[t("p",[v._v("建立连接需要三次握手 作用是为了确认双方的接收与发送能力是否正常。")])]),v._v(" "),t("ol",[t("li",[v._v("第一次握手：客户端给服务器发送一个 SYN 报文。")]),v._v(" "),t("li",[v._v("第二次握手：服务器收到 SYN 报文之后，会应答一个 SYN+ACK 报文。")]),v._v(" "),t("li",[v._v("第三次握手：客户端收到 SYN+ACK 报文之后，会回应一个 ACK 报文。")])]),v._v(" "),t("img",{attrs:{src:v.$withBase("/ground/1575861819z1.jpg?v=1"),width:"500",alt:"img"}}),v._v(" "),t("h3",{attrs:{id:"断开tpc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#断开tpc"}},[v._v("#")]),v._v(" 断开TPC")]),v._v(" "),t("blockquote",[t("p",[v._v("断开连接需要四次握手 作用是为了确认双方是否都处理完毕。")])]),v._v(" "),t("ol",[t("li",[t("p",[v._v("第一次握手:若客户端 A 认为数据发送完成，则它需要向服务端 B "),t("strong",[v._v("发送连接释放请求")]),v._v("。")])]),v._v(" "),t("li",[t("p",[v._v("第二次握手：B 收到连接释放请求后，会告诉应用层要释放 TCP 链接。然后会发送 ACK 包，并进入 CLOSE_WAIT 状态，表示 A 到 B 的"),t("strong",[v._v("连接已经释放")]),v._v("。")])]),v._v(" "),t("li",[t("p",[v._v("第三次握手:B 如果此时还有没发完的数据会继续发送，完毕后会向 A 发送连接释放请求，然后 B 便进入 "),t("strong",[v._v("LAST-ACK 状态")]),v._v("。")])])]),v._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[v._v("TIP")]),v._v(" "),t("p",[v._v("通过延迟确认的技术（通常有时间限制，否则对方会误认为需要重传），可以将第二次和第三次握手合并，延迟 ACK 包的发送。")])]),v._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[v._v("第四次握手：A 收到释放请求后，向 B 发送确认应答，此时 A 进入 TIME-WAIT 状态。该状态会持续 "),t("code",[v._v("2MSL")]),v._v("（最大段生存期，指报文段在网络中生存的时间，超时会被抛弃） 时间，\n若该时间段内没有 B 的重发请求的话 "),t("strong",[v._v("A就可以CLOSED 状态")]),v._v("。当 B 收到确认应答后"),t("strong",[v._v("B就可以CLOSED 状态")]),v._v("。")])]),v._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[v._v("2MSL的作用做")]),v._v(" "),t("p",[v._v("若 A 发完确认应答后直接进入 CLOSED 状态，如果确认应答因为网络问题一直"),t("strong",[v._v("没有到达")]),v._v("，那么"),t("strong",[v._v("会造成 B 不能正常关闭")]),v._v("。")])]),v._v(" "),t("Utterances")],1)}),[],!1,null,null,null);_.default=a.exports}}]);