(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{177:function(t,e,s){"use strict";s.r(e);var a=s(0),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"如何防止xss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何防止xss"}},[t._v("#")]),t._v(" "),s("a",{attrs:{href:"https://www.cnblogs.com/meituantech/p/9718677.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何防止XSS"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("（跨站脚本攻击）简称 XSS，是一种代码注入攻击。攻击者通过在目标网站上注入恶意脚本，使之在用户的浏览器上运行。利用这些恶意脚本，攻击者可获取用户的敏感信息如 Cookie、SessionID 等，进而危害数据安全。")]),t._v(" "),s("blockquote",[s("p",[t._v("非法的HTML标签或者JavaScript进行的一种攻击。通过 HTML 转义，可以防止 XSS 攻击。")])]),t._v(" "),s("h2",{attrs:{id:"如何防止csrf攻击"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何防止csrf攻击"}},[t._v("#")]),t._v(" "),s("a",{attrs:{href:"https://www.cnblogs.com/meituantech/p/9777222.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何防止CSRF攻击"),s("OutboundLink")],1)]),t._v(" "),s("blockquote",[s("p",[t._v("跨站点请求伪造，冒充获取用户各种权限发起请求。使用token就能解决")])]),t._v(" "),s("h3",{attrs:{id:"cookie-和-token"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cookie-和-token"}},[t._v("#")]),t._v(" cookie 和 token")]),t._v(" "),s("p",[t._v("cookie 和 token 都存放在 header 中，为什么不会劫持 token")]),t._v(" "),s("ol",[s("li",[t._v("首先token不是防止XSS的，而是为了防止CSRF的；")]),t._v(" "),s("li",[t._v("CSRF攻击的原因是浏览器会自动带上cookie，而token浏览器不会自动带上，这样就劫持不到")])]),t._v(" "),s("h3",{attrs:{id:"samesite-cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#samesite-cookie"}},[t._v("#")]),t._v(" SameSite Cookie")]),t._v(" "),s("blockquote",[s("p",[t._v("Chrome 80 在 2020 年 2 月后把 cookie 的 same-site 属性默认设置从 None 改为 Lax ，对一些系统之间需要相互嵌入且需要同步 cookie 的场景造成了影响；")])]),t._v(" "),s("p",[s("strong",[t._v("1. SameSite = None")])]),t._v(" "),s("p",[t._v("允许cross-site的Request携带3rd-party Cookie，这样在C系统嵌入(例如使用iframe)其他D系统的页面，登录后可以正常访问把cookie带到对D的request上，可以正常访问。")]),t._v(" "),s("p",[s("strong",[t._v("2. SameSite = Lax")])]),t._v(" "),s("p",[t._v("不允许cross-site的Request携带3rd-party Cookie，这样导致无法在C系统直接访问内嵌的D系统；但是通过a，link等顶层的链接是可以携带3rd-party Cookie的。")]),t._v(" "),s("p",[s("strong",[t._v("3. SameSite = strict")])]),t._v(" "),s("p",[t._v("不允许cross-site的Request携带3rd-party Cookie；通过a, link等顶层链接也无法携带Cookie")]),t._v(" "),s("p",[s("strong",[t._v("解决方法")])]),t._v(" "),s("p",[t._v("短期：chrome设置中关闭把默认的cookie 的 sameSite 设置为lax的设置")]),t._v(" "),s("p",[t._v("长期：前后端完成对cookie的改造，设置cookie的时候要声明下SameSite属性值")]),t._v(" "),s("h2",{attrs:{id:"如何防止sql注入攻击"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何防止sql注入攻击"}},[t._v("#")]),t._v(" 如何防止SQL注入攻击")]),t._v(" "),s("blockquote",[s("p",[t._v("前端验证只能起到一定作用，还需要后台参数化阻止SQL注入")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" location"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("search"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" re"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token regex"}},[t._v('/^\\?(.*)(select%20|insert%20|delete%20from%20|count\\(|drop%20table|update%20truncate%20|asc\\(|mid\\(|char\\(|xp_cmdshell|exec%20master|net%20localgroup%20administrators|\\"|:|net%20user|\\|%20or%20)(.*)$/gi')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" e "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" re"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"地址中含有非法字符～"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n location"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error.asp"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("Utterances")],1)}),[],!1,null,null,null);e.default=r.exports}}]);