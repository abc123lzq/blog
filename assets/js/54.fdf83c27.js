(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{422:function(s,a,t){"use strict";t.r(a);var e=t(42),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"ngxin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ngxin"}},[s._v("#")]),s._v(" ngxin")]),s._v(" "),t("p",[s._v("是一个高性能的HTTP和反向代理web服务器。")]),s._v(" "),t("p",[t("a",{attrs:{href:"http://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网下载"),t("OutboundLink")],1),s._v("解压直接运行nginx.exe\n(窗口会自动消失，不要一直点会启动多个)")]),s._v(" "),t("p",[s._v("推荐在目录下敲命令 nginx.exe这样窗口就不会消失，服务器默认端口是80。")]),s._v(" "),t("p",[s._v("访问127.0.0.1 就能看到nginx页面")]),s._v(" "),t("h2",{attrs:{id:"负载均衡配置常用策略"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#负载均衡配置常用策略"}},[s._v("#")]),s._v(" 负载均衡配置常用策略")]),s._v(" "),t("h3",{attrs:{id:"轮询-默认"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#轮询-默认"}},[s._v("#")]),s._v(" 轮询（默认）")]),s._v(" "),t("ul",[t("li",[s._v("优点：实现简单")]),s._v(" "),t("li",[s._v("缺点：无法考虑每台服务器处理能力")])]),s._v(" "),t("p",[t("strong",[s._v("配置")])]),s._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[s._v("upstream www.lzq.ocm{\n    server www.lzq.com:8080;\n    server www.lzq.com:9080;\n}\n")])])]),t("h3",{attrs:{id:"权重"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#权重"}},[s._v("#")]),s._v(" 权重")]),s._v(" "),t("ul",[t("li",[s._v("优点：考虑了每台服务器处理能力")])]),s._v(" "),t("p",[t("strong",[s._v("配置")])]),s._v(" "),t("p",[t("code",[s._v("weight")]),s._v("表示的是分配的概率大小，轮询默认的weight是1")]),s._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[s._v("upstream www.lzq.ocm{\n    server www.lzq.com:8080 weight=5;      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!--低配版服务器--\x3e")]),s._v("\n    server www.lzq.com:9080 weight=20;     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!--高配版服务器--\x3e")]),s._v("\n}\n")])])]),t("ul",[t("li",[t("p",[s._v("ip hash")])]),s._v(" "),t("li",[t("p",[s._v("优点：能实现一个用户访问同一个服务器")])]),s._v(" "),t("li",[t("p",[s._v("缺点：根据"),t("code",[s._v("ip_hash")]),s._v("负载不一定平均\n"),t("strong",[s._v("配置")])])])]),s._v(" "),t("p",[s._v("weight表示的是分配的概率大小，轮询默认的weight是1")]),s._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("div",{staticClass:"highlight-lines"},[t("br"),t("div",{staticClass:"highlighted"},[s._v(" ")]),t("br"),t("br"),t("br"),t("br")]),t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[s._v("upstream www.lzq.ocm{\n    ip_hash;\n    server www.lzq.com:8080 ;    \n    server www.lzq.com:9080 ;   \n}\n")])])]),t("h3",{attrs:{id:"url-hash-第三方插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#url-hash-第三方插件"}},[s._v("#")]),s._v(" url hash（第三方插件）")]),s._v(" "),t("ul",[t("li",[s._v("优点：能实现一个服务访问同一个服务器")]),s._v(" "),t("li",[s._v("缺点：根据"),t("code",[s._v("url hash")]),s._v("负载不一定平均")])]),s._v(" "),t("p",[t("strong",[s._v("配置")])]),s._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("div",{staticClass:"highlight-lines"},[t("br"),t("br"),t("br"),t("div",{staticClass:"highlighted"},[s._v(" ")]),t("br"),t("br")]),t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[s._v("upstream www.lzq.ocm{\n    server www.lzq.com:8080 ;    \n    server www.lzq.com:9080 ;    \n    hsah $request_uri\n}\n")])])]),t("h3",{attrs:{id:"fair-第三方插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fair-第三方插件"}},[s._v("#")]),s._v(" fair（第三方插件）")]),s._v(" "),t("ul",[t("li",[s._v("优点：按后端服务器的响应时间来分配请求，时间越短越先分配\n"),t("strong",[s._v("配置")])])]),s._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("div",{staticClass:"highlight-lines"},[t("br"),t("br"),t("br"),t("div",{staticClass:"highlighted"},[s._v(" ")]),t("br"),t("br")]),t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[s._v("upstream www.lzq.ocm{\n    server www.lzq.com:8080 ;     \n    server www.lzq.com:9080 ;    \n    fair；\n}\n")])])]),t("h3",{attrs:{id:"负载均衡参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#负载均衡参数"}},[s._v("#")]),s._v(" 负载均衡参数")]),s._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[s._v("upstream www.lzq.ocm{\n    ip_hash;\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!--down:当前服务不参与负载--\x3e")]),s._v("\n    server 127.0.0.1:9090 down;\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!--weight:值越大，负载权重越大--\x3e")]),s._v('\n    server www.lzq.com:8080  weight="2";   \n    \n    '),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!--bcakup：备用机器，一般不用，如没用到的时候成本高--\x3e")]),s._v("\n    server 127.0.0.1:9080  bcakup;    \n}\n")])])]),t("h2",{attrs:{id:"host"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#host"}},[s._v("#")]),s._v(" host")]),s._v(" "),t("ul",[t("li",[s._v("C:\\Windows\\System32\\drivers\\etc\\hosts")]),s._v(" "),t("li",[s._v("host 可以配置域名解析到指定的服务器。\n如： "),t("code",[s._v("127.0.0.1 www.baidu.com")])]),s._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/oldj/SwitchHosts/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("SwitchHosts"),t("OutboundLink")],1),s._v("host管理软件，推荐")])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("查看域名对应的ip属，以及是否连接上。 敲命令 ping一下即可， 如： "),t("code",[s._v("ping www.baidu.com")])])]),s._v(" "),t("h2",{attrs:{id:"配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[s._v("#")]),s._v(" 配置文件")]),s._v(" "),t("p",[s._v("目录下/config/nginx.conf")]),s._v(" "),t("h3",{attrs:{id:"引入其他配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#引入其他配置文件"}},[s._v("#")]),s._v(" 引入其他配置文件")]),s._v(" "),t("p",[s._v("为了更方便的管理，不全部写在nginx.conf件里。")]),s._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[s._v("http {\n\tinclude       vhost/*.conf;\n}\n")])])]),t("p",[s._v("目下/conf下创建文件夹vhost，在创建一个www.lzq.com.conf配置文件")]),s._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[s._v("upstream www.lzq.ocm{\n    server 127.0.0.1:8080 weight=1;      \n    server www.lzq.com:9080 weight=1;     \n}   \nserver{\n    listen 80;\n    autoindex on;\n    server_name www.lzq.com;\n    access_log c:/access.log combined;\n    index index.html index.htm index.jsp index.php;\n    location / {\n        proxy_pass http://www.lzq.com;\n        add_header Access-Control-Allow-Origin *;\n    }\n}\n")])])]),t("p",[s._v("目下敲nginx.exe -s reload进行重启")])])}),[],!1,null,null,null);a.default=r.exports}}]);